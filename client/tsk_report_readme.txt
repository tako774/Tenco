天則観報告ツール v0.04
http://tenco.info/
2012/10/24


○概要
このソフトウェアは、Tenco! サーバーに天則観の対戦結果データを
報告するコマンドラインアプリケーションです。
Tenco! の詳細は、上記URLからご覧ください。


○天則観について
天則観は、起動しておくだけで東方非想天則のネット対戦記録をとってくれる、
大変ありがたいソフトです。（東方緋想天での緋行跡にあたるツールです）。

入手先はしたらば「萃磨選堆 東方緋想天掲示板」の「非想天則関連ツールスレッド」で確認できます。
東方 tools Wiki にも情報が載っています。


○インストール方法・使い方

１．インストール手順
圧縮ファイルを展開してできたフォルダ tsk_report_v*** を「フォルダごと」、
天則観のフォルダ内においてください（正確には、天則観DBファイルの置いてあるフォルダ内です）。
フォルダ名は自由に変えていただいてかまいません。

※特定の天則観プロファイルデータのみを報告したい場合、「設定ファイルについて」を参照し、
　データベースファイルのパスを書き換えてください


２．tsk_report.exe を実行（初回）
コマンドラインアプリケーションが立ち上がります。

初回報告時のみ、アカウント登録が必要になります。
このとき、すでにプレイヤーが Tenco! アカウントを持っているかどうかで手順が変わります
上記についても説明がでますので、適宜入力してください。

その後、自動的に対戦結果報告を実施します。
デフォルトでは、全天則観プロファイルのデータを送信します。
対戦結果の報告が終わると、ウィンドウが勝手に閉じます。


３．以後の報告
tsk_report.exe を立ち上げると、前回報告分以降の対戦結果を
自動的にサーバーに送ってくれます。


４．そのほか
PCの時刻合わせをしておくと、マッチングの可能性が少しあがる、ご利益が得られるでしょう。
マッチング判定時に、お互いの対戦時刻を見ているからです。


○アップデート方法
新しいバージョンのプログラムを展開し、ファイルをそのまま上書きすれば完了です。
config_default.yaml は消さないでください（上書きしたままにしてください）。
起動できなくなります。


○実行オプション
-a 全件報告モード。サーバーから登録済み最終対戦時刻を取得せず、全件報告します
   同梱の「全件報告モード.bat」と同じ動きです。
   想定用途：複数プロファイルを使っていて、一方のプロファイルで報告したあと、
   他方のプロファイルで報告したら、最終対戦時刻以降のデータしか遅れなかったときなどです。

-g ゲームIDを設定ファイル（config.yaml）から読み込みます
　 デフォルトでは、設定ファイルに書かれたゲームIDは無視されます


○設定ファイル（config.yaml）について
保存文字コードは UTF-8 または UTF-8N です。
メモ帳で上書きしてもかまいません。

値を書くときには、かならず「:」のあとに半角スペースを入れる必要があります。

一番下の database: -> file_path: の部分で、天則観のデータベースのパスを指定できます。
また、account: -> name: と password: に、アカウント情報を設定できます
----
account: 
  name:              # アカウント名
  password:          # アカウント生パスワード
database: 
  file_path: ../*.db   # 天則観のデータベースファイルパス
----
データベースファイルパスは、固定名・ワイルドカードを使った指定のどちらでもかまいません。
固定名とすると、１つの天則観プロファイルのみを報告することができます。


○FAQ
Q1.アカウント名を変えたい、パスワードを忘れた、メールアドレスを消したい・変えたい
- メールアドレス登録をしている方
　お手数ですが、Tenco! 管理者までご連絡ください。
　登録時のメールアドレスに対して、こちらから連絡した上で、対応いたします。

- メールアドレス登録をしなかった方
　下記の機能ができるまでお待ちください。
　パスワードを覚えていて、管理者に知られてもよければ、メールをいただければ対応いたします。

　今後、何らかの形でプレイヤーが自分でできる機能をご提供する予定ですが、
　まだいつ頃になるか分かりません。ご容赦願います。

Q2.間違って新しいデータを報告したので、古いデータが報告できなくなった！
　全件報告モードをお使いください。
　同梱の「全件報告モード.bat」を使うか、-a オプションを指定して実行してください。

Q3.アカウント情報の扱いについて
　メールアドレス・パスワードは暗号化されており、管理者の目にも触れません。
　メールアドレスの削除には、いつでも応じます。

　登録されたメールアドレスは、パスワードをプレイヤーが忘れたときに、
　Tenco!側からご連絡する際、プレイヤーの本人確認をするためだけに使います。
　他の用途には使いません。

Q4.アカウント削除したい！
　アカウント削除機能は未実装なので、お手数ですが、Tenco!管理者までご連絡ください。

Q5.アカウント削除時のデータの扱いについて
　メールアドレス・パスワード情報は削除いたします
　マイページも見えなくなり、他のTenco!内のページからはリンクされなくなります。

　対戦結果データはすべて非公開となります。レート計算対象からも外れます。
　ただし、こちらについては、Tenco!データベース上には残ります。
　
　Tenco!の管理人は一人であり、相互確認を誰ともできない状態で
　作業しております。このため、間違って別の方の対戦結果データを
　消したり、バグで全対戦結果データを消してしまったりして、
　他の多くのアカウントの方にご迷惑をかけることを心配しております。
　対策といたしまして、匿名の非公開データについては、
　極力削除をしない方針をとっております。
　
　非営利・個人でやっている以上、作業品質上どうしても制限があることを、
　ご理解いただければ幸いです。

Q6.マイページ上でみてお互い報告してるのに、マッチングしてないです
　両者の対戦時刻が大きくずれていませんか？両者のページを見て、見比べてみてください。
　
　お互いが認識している対戦時刻が、5分以上ずれているとマッチングしません。
　自分のPCの時刻設定を見直しましょう。
　相手の時刻がくるっているのであれば、連絡するか、あきらめましょう。

Q7.config.yaml の database: file_name: のあとが、
　 binary | <なんか記号>　みたいになってるんですが‥‥？
　 
　 仕様とさせてください。内部のライブラリが、日本語などのマルチバイトデータを記号に
　 変換してしまうためです。動作自体には、特に問題はありません。
　 マルチバイト文字を指定したあと、報告ツールを実行すると、変な記号の羅列になります。
　 

○連絡先
萃磨選堆の東方非想天則掲示板のツールスレッド等
twitter/メールの場合、サイトに宛先が書いてありますので、
そちらにご連絡ください。


○ライセンスについて
複製自由・再配布自由・改変自由

ただし、実行ファイルには Rubyインタプリタが含まれます。
これにはRubyライセンスが適用されるため、配布時には下記のいずれかが必要です。
（詳細はRubyライセンスを参照ください）

* Rubyインタプリタのソースコードの入手先をドキュメント等に記載する。
* Rubyインタプリタのソースコードを同梱する。

本プログラムもRubyライセンスに従い、ソースコードの入手先を示します。

オブジェクト指向スクリプト言語 Ruby
http://www.ruby-lang.org/ja/


○謝辞
プレイヤーの皆様
天則観の作者さん
Tenco!ユーザーの皆様
したらば「萃磨選堆 東方緋想天掲示板」「萃磨選堆 東方非想天則掲示板」の皆様
AddressUpdater の作者さん、めぐりむ@野良うさぎサーバー運営者さん
黄昏フロンティアのみなさん


○免責
このプログラム無保証です。作者はサポートする意志はありますが、
使用によって生じたいかなる損害に対しても責任を持ちません。

